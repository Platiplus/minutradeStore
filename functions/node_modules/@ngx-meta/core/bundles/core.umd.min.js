!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/platform-browser"),require("rxjs/Observable"),require("rxjs/add/observable/of"),require("rxjs/add/observable/fromPromise")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/platform-browser","rxjs/Observable","rxjs/add/observable/of","rxjs/add/observable/fromPromise"],t):t((e.ngxMeta=e.ngxMeta||{},e.ngxMeta.core=e.ngxMeta.core||{}),e.ng.core,e.ng.platformBrowser,e.Rx.Observable)}(this,function(e,t,a,i){"use strict";function o(e){return!!e&&"function"==typeof e.then}function r(e){return!!e&&"function"==typeof e.subscribe}function s(){return new c}var n={AppendPageTitle:0,PrependPageTitle:10};n[n.AppendPageTitle]="AppendPageTitle",n[n.PrependPageTitle]="PrependPageTitle";var l=function(){return function(){}}(),c=function(){function e(e){void 0===e&&(e={pageTitlePositioning:n.PrependPageTitle,defaults:{}}),this.providedSettings=e}return Object.defineProperty(e.prototype,"settings",{get:function(){return this.providedSettings},enumerable:!0,configurable:!0}),e}(),p=function(){function e(e,t,a){this.loader=e,this.title=t,this.meta=a,this.settings=e.settings,this.isMetaTagSet={}}return e.prototype.setTitle=function(e,t){var a=this;void 0===t&&(t=!1),(e?this.callback(e):i.Observable.of("")).subscribe(function(e){var o="";e?!t&&a.settings.pageTitleSeparator&&a.settings.applicationName?a.callback(a.settings.applicationName).subscribe(function(t){o=t?a.getTitleWithPositioning(e,t):e,a.updateTitle(o)}):a.updateTitle(e):(a.settings.defaults&&a.settings.defaults.title?a.callback(a.settings.defaults.title):i.Observable.of("")).subscribe(function(e){!t&&a.settings.pageTitleSeparator&&a.settings.applicationName?a.callback(a.settings.applicationName).subscribe(function(t){o=t?a.getTitleWithPositioning(e,t):e,a.updateTitle(o)}):a.updateTitle(e)})})},e.prototype.setTag=function(e,t){var a=this;if("title"===e)throw new Error("Attempt to set "+e+' through "setTag": "title" is a reserved tag name. Please use `MetaService.setTitle` instead.');t=t||(this.settings.defaults&&this.settings.defaults[e]?this.settings.defaults[e]:""),("og:locale"!==e&&"og:locale:alternate"!==e?this.callback(t):i.Observable.of(t)).subscribe(function(t){a.updateTag(e,t)})},e.prototype.update=function(e,t){var a=this;if(t){if(t.disabled)return void this.update(e);this.setTitle(t.title,t.override),Object.keys(t).forEach(function(e){var i=t[e];if("title"!==e&&"override"!==e){if("og:locale"===e)i=i.replace(/-/g,"_");else if("og:locale:alternate"===e){var o=t["og:locale"];return void a.updateLocales(o,t[e])}a.setTag(e,i)}})}else{var i=this.settings.defaults?this.settings.defaults.title||this.settings.applicationName:this.settings.applicationName;this.setTitle(i,!0)}this.settings.defaults&&Object.keys(this.settings.defaults).forEach(function(e){var i=a.settings.defaults[e];if(!(t&&(e in a.isMetaTagSet||e in t)||"title"===e||"override"===e)){if("og:locale"===e)i=i.replace(/-/g,"_");else if("og:locale:alternate"===e){var o=t?t["og:locale"]:void 0;return void a.updateLocales(o,i)}a.setTag(e,i)}});var o=((this.settings.applicationUrl||"/")+e).replace(/(https?:\/\/)|(\/)+/g,"$1$2").replace(/\/$/g,"");this.setTag("og:url",o||"/")},e.prototype.removeTag=function(e){this.meta.removeTag(e)},e.prototype.callback=function(e){if(this.settings.callback){var t=this.settings.callback(e);return r(t)?t:o(t)?i.Observable.fromPromise(t):i.Observable.of(t)}return i.Observable.of(e)},e.prototype.getTitleWithPositioning=function(e,t){switch(this.settings.pageTitlePositioning){case n.AppendPageTitle:return t+this.settings.pageTitleSeparator+e;case n.PrependPageTitle:return e+this.settings.pageTitleSeparator+t;default:throw new Error("Invalid pageTitlePositioning specified ["+this.settings.pageTitlePositioning+"]!")}},e.prototype.updateTitle=function(e){this.title.setTitle(e),this.meta.updateTag({property:"og:title",content:e})},e.prototype.updateLocales=function(e,t){var a=this;(e=e||(this.settings.defaults?this.settings.defaults["og:locale"]:""))&&this.settings.defaults&&(this.settings.defaults["og:locale"]=e.replace(/_/g,"-")),this.meta.getTags('property="og:locale:alternate"').forEach(function(e){a.meta.removeTagElement(e)}),e&&t&&t.split(",").forEach(function(t){e.replace(/-/g,"_")!==t.replace(/-/g,"_")&&a.meta.addTag({property:"og:locale:alternate",content:t.replace(/-/g,"_")})})},e.prototype.updateTag=function(e,t){if(0===e.lastIndexOf("og:",0)?this.meta.updateTag({property:e,content:"og:locale"===e?t.replace(/-/g,"_"):t}):this.meta.updateTag({name:e,content:t}),this.isMetaTagSet[e]=!0,"description"===e)this.meta.updateTag({property:"og:description",content:t});else if("author"===e)this.meta.updateTag({property:"og:author",content:t});else if("publisher"===e)this.meta.updateTag({property:"og:publisher",content:t});else if("og:locale"===e){var a=this.settings.defaults?this.settings.defaults["og:locale:alternate"]:"";this.updateLocales(t,a),this.isMetaTagSet["og:locale:alternate"]=!0}else if("og:locale:alternate"===e){var i=this.meta.getTag('property="og:locale"').content;this.updateLocales(i,t),this.isMetaTagSet["og:locale"]=!0}},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:l},{type:a.Title},{type:a.Meta}]},e}(),g=function(){function e(e){this.meta=e}return e.prototype.canActivate=function(e,t){var a=t.url,i=e&&e.data&&e.data.meta?e.data.meta:void 0;return this.meta.update(a,i),!0},e.prototype.canActivateChild=function(e,t){return this.canActivate(e,t)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:p}]},e}(),u=function(){function e(e){if(e)throw new Error("MetaModule already loaded; import in root module only.")}return e.forRoot=function(t){return void 0===t&&(t={provide:l,useFactory:s}),{ngModule:e,providers:[t,g,p]}},e.decorators=[{type:t.NgModule}],e.ctorParameters=function(){return[{type:e,decorators:[{type:t.Optional},{type:t.SkipSelf}]}]},e}();e.metaFactory=s,e.MetaModule=u,e.PageTitlePositioning=n,e.MetaGuard=g,e.MetaLoader=l,e.MetaStaticLoader=c,e.MetaService=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=core.umd.min.js.map
